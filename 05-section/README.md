# Section 5

## Python CTypes

- Foreign function library to allow calling of non-Python language libraries (DLLs or shared libraries)
- Provides support for C-compatible data types, wrapping them in pure Python

## Evading A/V Software

- Python isn't really necessary at this point. It often just allows a simply Python wrapper to the compiled code underneath
- The key is to create your own malware; pre-built malware will most likely have a signature available to A/V software
    - Metasploit can generate shell code or other malware, or you can hand-craft it based on your target
    - Most malware will be in a compiled language, as executable binaries contain everything necessary to run
    - Python bytecode can be frozen into executable form using a variety of tools
    - Ensure executables are set to "no console" so no popup windows appear
- You can check Ifyourmalware IS detected using online scanners, such as https://www.virustotal.com
    - Understand that, once uploaded, your malware signature will be incorporated into future A/ V updates
- Best solution is to create an internal sandbox environment with a number of A/ V applications and test yourself
    - Ensure there are no Internet connections between the A/V software and the vendors to ensure the signatures aren't sent home
    - Easiest solution: create a virtual machine and, once A/V software is updated with latest signatures, turn off network connections

## Dropping The Payload

- A variety of options are available to infect the target
    - Create trojan software; freeware/shareware games are popular
    - Include malware in open-source code patch
    - Phishing email attachment, e.g. Excel macro
    - Cross-site scripting attack (inject client-side executable code into websites)
    - Putting executable on USB drive and leave in parking lot or other public place